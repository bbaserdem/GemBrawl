use flake 

# Get current git branch name
GIT_BRANCH=$(git rev-parse --abbrev-ref HEAD 2>/dev/null || echo "")
ENV_FILES=(.env .env.development .env.local .env.development.local)

# Branch-specific logic for environment variables
for f in "${ENV_FILES[@]}" ; do
    if [[ "$GIT_BRANCH" == "main" || "$GIT_BRANCH" == "master" ]]; then
        dotenv_if_exists "${f}"
    else
        dotenv "${f}" && echo "Found ${f} at ${PWD}" || echo "Not found ${f} at ${PWD}"
        dotenv "../../${f}" && echo "Found ${f} at ${PWD}/../../" || echo "Not found ${f} at ${PWD}/../../"
    fi
done
